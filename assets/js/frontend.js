jQuery(document).ready((function(t){var e={$modal:t("#msp_modal"),$header:t("#mobile-menu"),$checkout_fields:t("#customer_details > div:first-child"),bulk_order_list:{},init:function(){this.init_owl_carousel(),this.init_slideout(),t("#msp_submit_question").on("blur",'input[name="question"]',e.customer_faq_validate_question),t("#msp_submit_question").on("click","button",e.customer_submit_question),t("#msp_customer_faq").on("click",".msp-submit-answer",e.customer_submit_awnser),t(".woocommerce-variation-add-to-cart").on("change",'input[name="variation_id"]',e.replace_single_product_price_range),t("#filter-button").click((function(){t(".widget-area").slideToggle()})),this.$checkout_fields.on("focusout","input",(function(){t(document.body).trigger("update_checkout")})),t("#msp-contact").on("click","button.submit",e.submit_contact_form),t("#bulk-tab-content").on("change",".var-bulk-update",e.add_to_bulk_list),this.$modal.on("show.bs.modal",this.route),this.$modal.on("submit","form",this.submit),this.$header.on("click","li.menu-item-has-children",this.open_nav_child_list),this.promo_pop_up()},append_nav_layers:function(){t(".woocommerce-widget-layered-nav").each((function(t,e){e.insertAdjacentHTML("beforeend",'<a href="javascript:void(0)" class="see_more" >See more</a>')}))},see_more_nav_layers:function(t){let e=t.delegateTarget.getElementsByTagName("ul")[0];void 0!==e&&console.log(e)},promo_pop_up:function(){let e=function(t){for(var e="msp_promo_seen=",o=decodeURIComponent(document.cookie).split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}();t(".promo_pop_up_btn").length&&e!=wp_ajax.cookie_version&&setTimeout((function(){t(".promo_pop_up_btn").click()}),2e3)},replace_single_product_price_range:async function(n){const i=t("#order-tab-content p.price"),a=t(".woocommerce-variation-availability").html();let s={action:"msp_get_variation_price_html",id:t("input.variation_id").val()};var l=[];if(t("table.variations select").each((function(){l.push(this.value.length)})),l.every(o)){i.html('<div class="spinner-border text-danger" role="status"><span class="sr-only">Loading...</span></div>'),await t.post(wp_ajax.url,s,(function(t){t&&i.html(t+a)}));const o=i.find("span.amount").last().text().replace("$","").replace(",","");o&&e.update_discount_table(o)}},update_discount_table:function(e){console.log(e),t("#msp-bulk-pricing tbody > tr > td").each(((t,o)=>{if(0!==t){const t="$"+(parseFloat(o.className)*e).toFixed(2);o.innerText=t}}))},add_to_bulk_list:function(o){let n=[],i=t(o.target);for(var a in+i.val()>+i.attr("max")&&i.val(+t(this).attr("max")),e.bulk_order_list[i.attr("id")]=i.val(),e.bulk_order_list)e.bulk_order_list.hasOwnProperty(a)&&0!=e.bulk_order_list[a]&&(e.bulk_order_list[a]>1?n.push(a+":"+e.bulk_order_list[a]):n.push(a));n=n.join(",");let s=window.location.protocol+"//"+window.location.hostname+"/cart/?add-to-cart="+n+",",l=n.length?s:"#";t("#iww_bulk_form_submit").attr("href",l),console.log(l,n)},open_nav_child_list:function(e){$child=t(e.target.children[1]),console.log(e,$child)},init_slideout:function(){var e=new Slideout({panel:document.getElementById("page"),menu:document.getElementById("mobile-menu"),padding:256,tolerance:70,touch:!1});function o(t){t.preventDefault(),e.close()}document.querySelector(".mobile-menu-button").addEventListener("click",(function(){t("#mobile-menu").show(),e.toggle()})),document.querySelector("a.close").addEventListener("click",o),e.on("beforeopen",(function(){this.panel.classList.add("panel-open")})).on("open",(function(){this.panel.addEventListener("click",o)})).on("beforeclose",(function(){this.panel.classList.remove("panel-open"),this.panel.removeEventListener("click",o)}))},init_owl_carousel:function(){t(".owl-carousel").owlCarousel({responsiveClass:!0,nav:!0,dots:!0,margin:10,responsive:{0:{items:2},450:{items:4},1e3:{items:5}}})},get_json_from_url:function(t){t||(t=location.href);var e=t.indexOf("?"),o=t.indexOf("#");if(-1==o&&-1==e)return{};-1==o&&(o=t.length);var n=-1==e||o==e+1?t.substring(o):t.substring(e+1,o),i={};return n.split("&").forEach((function(t){if(t){var e=(t=t.split("+").join(" ")).indexOf("="),o=e>-1?t.substr(0,e):t,n=e>-1?decodeURIComponent(t.substr(e+1)):"",a=o.indexOf("[");if(-1==a)i[decodeURIComponent(o)]=n;else{var s=o.indexOf("]",a),l=decodeURIComponent(o.substring(a+1,s));o=decodeURIComponent(o.substring(0,a)),i[o]||(i[o]=[]),l?i[o][l]=n:i[o].push(n)}}})),i},route:function(o){let n=t(o.relatedTarget);var i={title:n.attr("data-title"),model:n.attr("data-model"),action:n.attr("data-action"),id:n.attr("data-id")};e.$modal.find(".modal-title").text(i.title),e[i.model](i.action,i.id)},submit:function(o){o.preventDefault(),console.log(o),e.$modal.find(".modal-body");let n=t(o.target).find('input[name="action"]').val(),i=t(o.target).find('input[name="model"]').val(),a={action:n,form_data:t(o.target).serialize()};t.post(wp_ajax.url,a,(function(t){e[i]("post","",t)}))},close:function(){e.$modal.modal("toggle")},size_guide:function(o,n){t.post(wp_ajax.url,{action:"msp_get_product_size_guide_src",id:n},(function(o){e.$modal.find(".modal-body").html(t("<img/>",{src:o,class:"mx-auto"}))}))},promo:function(o,n){t.post(wp_ajax.url,{action:"msp_get_promo_pop_up_link_and_image",id:n},(function(o){console.log(o);let n=t("<a/>",{href:o.link}).append(t("<img/>",{src:o.src,class:"mx-auto"}));e.$modal.find(".modal-body").html(n),document.cookie="msp_promo_seen="+wp_ajax.cookie_version+"; path=/; max-age=2592000;"}))},leave_feedback:function(o,n,i){let a=e.$modal.find(".modal-body");switch(o){case"get":t.post(wp_ajax.url,{action:"msp_get_leave_feedback_form",id:n},(function(t){a.html(t)}));break;case"post":console.log(i),i?(a.html('<div class="text-center"><i class="fas fa-check-circle fa-2x text-success"></i><h1>Thank you for your feedback!</h1></div>'),setTimeout((function(){e.close()}),3e3)):a.find(".feedback").text("Feedback requires atleast a star rating; thanks!")}},submit_contact_form:function(e){var o=t(e.delegateTarget.children[1]),n=o.find("#errors");console.log(o,n),t.post(wp_ajax.url,o.serialize(),(function(n){n?t(e.delegateTarget).html('<p class="lead">Thank you, expect a response same or next business day.</p>'):o.find("#errors").text("Error, please try again and fill everything out!")}))}};function o(t){return t>0}e.init(),0!=t("#msp_select2_products").length&&t("#msp_select2_products").select2({ajax:{url:wp_ajax.url,dataType:"json",delay:250,data:function(t){return{q:t.term,action:"msp_get_products"}},processResults:function(e){var o=[];return e&&t.each(e,(function(t,e){o.push({id:e[0],text:e[1]})})),{results:o}},cache:!0},minimumInputLength:3}),t("#billing_postcode").keydown((function(e){t(this).val().length>=5&&t(this).val(t(this).val().substr(0,5))})),t("#billing_postcode").keyup((function(e){t(this).val().length>=5&&t(this).val(t(this).val().substr(0,5))})),t("#billing_po").val("")}));