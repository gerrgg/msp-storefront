/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/*!**********************************!*\
  !*** ./src/admin/admin-index.js ***!
  \**********************************/
eval("jQuery(function ($) {\n  var msp_admin = {\n    init: function () {\n      //    $('.color-field').wpColorPicker();\n      $(\"#resource_tab\").on(\"click\", \"button.add_input_line\", msp_admin.add_line_item);\n      $(\"#msp-product-video\").on(\"click\", \"button.add\", msp_admin.add_video_line); // Page builder\n\n      $(\"#msp-specifications\").on(\"click\", \"button.add\", msp_admin.add_spec_row);\n      $(\"#msp-specifications\").on(\"click\", \"button.remove\", msp_admin.delete_spec_row);\n      $(\"#menu-to-edit\").on(\"click\", \"input.upload-btn\", msp_admin.upload_media);\n      $(\"#resource_tab\").on(\"click\", \"input.upload-btn\", msp_admin.upload_media);\n    },\n\n    upload_media(e) {\n      /**\n       * Enables use of the WP Media button in WP-Admin menu item\n       */\n      e.preventDefault();\n      let input = e.target.previousElementSibling;\n      image = wp.media({\n        title: \"Upload Image\",\n        multiple: false\n      }).open().on(\"select\", function (e) {\n        var uploaded_image = image.state().get(\"selection\").first();\n        console.log(uploaded_image);\n        var image_url = uploaded_image.toJSON().url;\n        input.value = image_url;\n      });\n    },\n\n    delete_spec_row(e) {\n      let tr = $(e.target.parentElement.parentElement);\n      let label = tr.find(\"td:first-child input\").val();\n      let post_id = $(\"#post_ID\").val();\n      let data = {\n        action: \"msp_delete_specification\",\n        label: label,\n        post_id: post_id\n      };\n      $.post(ajaxurl, data);\n      tr.remove();\n    },\n\n    submit_promo_option(e) {\n      // get inputs\n      inputs = $(e.delegateTarget).find(\"input\");\n      var max = inputs.length / 2 - 1; // setup for ajax\n\n      var data = {\n        action: \"msp_create_promo_line\",\n        options: {}\n      };\n\n      for (var i = 0; i <= max; i++) {\n        var id = $('input[name=\"msp_promo[' + i + '][image_id]\"]').val();\n        var link = $('input[name=\"msp_promo[' + i + '][permalink]\"]').val();\n        if (id.length > 0 && link.length > 0) data.options[id] = link;\n      }\n\n      $.post(ajaxurl, data, function (response) {\n        msp_admin.add_promo_line(e, max + 1);\n      });\n    },\n\n    add_spec_row(e) {\n      /**\n       * Find the class of the row (index) and increment. This should avoid specs getting out of order.\n       */\n      let $table = $(e.delegateTarget).find(\"table\");\n      let i = Number($table.find(\"tr\").last().attr(\"class\")) + 1;\n\n      if (isNaN(i)) {\n        i = 0;\n      }\n\n      $table.append($(\"<tr/>\", {\n        class: i\n      }).append(\"<td>\" + '<input style=\"width: 100%\" type=\"text\" name=\"specification[' + i + '][label]\">' + \"</td>\", \"<td>\" + '<input style=\"width: 100%\" type=\"text\" name=\"specification[' + i + '][value]\">' + \"</td>\", '<td><button class=\"remove\" type=\"button\" role=\"button\">&times;</button></td>'));\n    },\n\n    add_video_line: function (e) {\n      let button = $(e.target);\n      let $table = $(\"#msp_product_video_input_table\");\n      count = !isNaN(button.attr(\"data-count\")) ? +button.attr(\"data-count\") + 1 : 0;\n      $table.append($(\"<input />\", {\n        name: \"product_video[\" + count + \"]\"\n      }));\n      button.attr(\"data-count\", count++);\n    },\n    add_line_item: function (e) {\n      let button = $(e.target);\n      count = +button.attr(\"data-count\") + 1;\n      let $parent = $(\"#resource_input_wrapper\");\n      let fields = {\n        label: $(\"#resource_label\").clone(),\n        url: $(\"#resource_url\").clone()\n      };\n      Object.keys(fields).forEach(function (field) {\n        fields[field].attr({\n          id: \"\",\n          name: \"resource_\" + field + \"[\" + count + \"]\"\n        });\n        $parent.append(fields[field].val(\"\"));\n      });\n      $parent.append('<input type=\"button\" name=\"upload-btn\" class=\"button-secondary upload-btn\" value=\"Upload Image\"></br>');\n      $(e.target).attr(\"data-count\", count++);\n    }\n  };\n  msp_admin.init();\n  if (!$(\"#title-length\").length) return;\n  $(\"#title-length\").html($(\"#gsf_title\").val().length);\n  $(\"#gsf_title\").keyup(function () {\n    $(\"#title-length\").html($(this).val().length);\n  });\n});\n\n//# sourceURL=webpack://msp-storefront/./src/admin/admin-index.js?");
/******/ })()
;